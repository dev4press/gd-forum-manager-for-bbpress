!function(l,a,r,t){a.wp=a.wp||{},a.wp.gdfar=a.wp.gdfar||{},a.wp.gdfar.manager={edit:{dialog:function(a){a.preventDefault();var r=l(this).closest(".gdfar-ctrl-wrapper"),t=r.data("type"),e=r.data("id");l("#gdfar-modal-edit-content").html('<div class="gdfar-dialog-message">'+gdfar_manager_data.message.please_wait+"</div>"),l("#gdfar-modal-edit-title").html(gdfar_manager_data.titles.edit[t]),MicroModal.show("gdfar-modal-edit",{onShow:function(){}}),l.ajax({success:function(a){l("#gdfar-modal-edit-content").html(a)},type:"post",dataType:"html",data:{is:gdfar_manager_data.bbpress.is,forum:gdfar_manager_data.bbpress.forum_id,type:t,id:e},url:gdfar_manager_data.ajaxurl+"?action=gdfar_request_edit&_ajax_nonce="+gdfar_manager_data.nonce})},submit:function(){l(".gdfar-modal__footer button").attr("disabled",!0),l("#gdfar-modal-edit").hasClass("is-open")&&l("#gdfar-manager-form-edit").ajaxSubmit({success:function(a){l(".gdfar-action").removeClass("gdfar-is-error"),l(".gdfar-error-message").remove(),"ok"===a.status?0<a.errors?(l.each(a.elements,function(a,r){var t=l(".gdfar-action.gdfar-action-"+a);t.addClass("gdfar-is-error"),l(".gdfar-conent-wrapper",t).append("<p class='gdfar-error-message'>"+r+"</p>")}),l(".gdfar-modal__footer button").attr("disabled",!0)):location.reload(!1):"error"===a.status&&alert(a.error)},type:"post",dataType:"json",url:ajaxurl+"?action=gdfar_process_edit"})}},bulk:{dialog:function(a){a.preventDefault();var r=l(this).closest(".gdfar-bulk-control").data("type");l("#gdfar-modal-bulk-content").html('<div class="gdfar-dialog-message">'+gdfar_manager_data.message.please_wait+"</div>"),l("#gdfar-modal-bulk-title").html(gdfar_manager_data.titles.bulk[r]),MicroModal.show("gdfar-modal-bulk",{onShow:function(){}}),l.ajax({success:function(a){l("#gdfar-modal-bulk-content").html(a)},type:"post",dataType:"html",data:{is:gdfar_manager_data.bbpress.is,forum:gdfar_manager_data.bbpress.forum_id,type:r},url:gdfar_manager_data.ajaxurl+"?action=gdfar_request_bulk&_ajax_nonce="+gdfar_manager_data.nonce})},update:function(a,r,t){l(".__selected",a).html(r),l(".__total",a).html(t)},select:function(a){a.preventDefault();var r=l(this).hasClass("__all"),t=l(this).closest(".gdfar-bulk-control").data("key");l(".gdfar-ctrl-wrapper[data-key="+t+"] input[type=checkbox]").prop("checked",r).trigger("change")},forum:function(){var a=".gdfar-ctrl-forum .gdfar-ctrl-checkbox",r=l(this).parent(),t=l(this).closest(".bbp-forums"),e=l(".gdfar-bulk-forum-"+r.data("key")),d=l(a+":checked",t).length,o=l(a,t).length;0===d?(l(a,t).removeClass("gdfar-is-on"),e.hide()):(l(a,t).addClass("gdfar-is-on"),e.show(),wp.gdfar.manager.bulk.update(e,d,o))},topic:function(){var a=".gdfar-ctrl-topic .gdfar-ctrl-checkbox",r=l(this).parent(),t=l(this).closest(".bbp-topics"),e=l(".gdfar-bulk-topic-"+r.data("key")),d=l(a+":checked",t).length,o=l(a,t).length;0===d?(l(a,t).removeClass("gdfar-is-on"),e.hide()):(l(a,t).addClass("gdfar-is-on"),e.show(),wp.gdfar.manager.bulk.update(e,d,o))}},init:function(){l(r).on("change",".gdfar-ctrl-topic .gdfar-ctrl-checkbox",wp.gdfar.manager.bulk.topic),l(r).on("change",".gdfar-ctrl-forum .gdfar-ctrl-checkbox",wp.gdfar.manager.bulk.forum),l(r).on("click","#gdfar-modal-edit-submit",wp.gdfar.manager.edit.submit),l(r).on("click",".gdfar-ctrl-wrapper .gdfar-ctrl-edit",wp.gdfar.manager.edit.dialog),l(r).on("click",".gdfar-bulk-control .gdfar-ctrl-bulk",wp.gdfar.manager.bulk.dialog),l(r).on("click",".gdfar-bulk-control a.__all, .gdfar-bulk-control a.__none",wp.gdfar.manager.bulk.select)}},wp.gdfar.manager.init()}(jQuery,window,document);